@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 96% 0.01 106;
    --foreground: 20% 0.01 106;
    --card: 98% 0.01 106;
    --card-foreground: 20% 0.01 106;
    --popover: 98% 0.01 106;
    --popover-foreground: 20% 0.01 106;
    --primary: 45% 0.15 145;
    --primary-foreground: 98% 0.01 145;
    --secondary: 92% 0.02 106;
    --secondary-foreground: 20% 0.01 106;
    --muted: 94% 0.02 106;
    --muted-foreground: 50% 0.01 106;
    --accent: 50% 0.12 145;
    --accent-foreground: 98% 0.01 145;
    --destructive: 55% 0.20 25;
    --destructive-foreground: 98% 0.01 25;
    --border: 88% 0.02 106;
    --input: 88% 0.02 106;
    --ring: 45% 0.15 145;
    --radius: 0.5rem;
    --chart-1: 60% 0.15 145;
    --chart-2: 65% 0.12 180;
    --chart-3: 55% 0.18 120;
    --chart-4: 70% 0.10 200;
    --chart-5: 50% 0.20 160;
  }

  .dark {
    --background: 15% 0.01 106;
    --foreground: 95% 0.01 106;
    --card: 18% 0.01 106;
    --card-foreground: 95% 0.01 106;
    --popover: 18% 0.01 106;
    --popover-foreground: 95% 0.01 106;
    --primary: 55% 0.15 145;
    --primary-foreground: 15% 0.01 145;
    --secondary: 25% 0.02 106;
    --secondary-foreground: 95% 0.01 106;
    --muted: 22% 0.02 106;
    --muted-foreground: 65% 0.01 106;
    --accent: 60% 0.12 145;
    --accent-foreground: 15% 0.01 145;
    --destructive: 50% 0.20 25;
    --destructive-foreground: 95% 0.01 25;
    --border: 28% 0.02 106;
    --input: 28% 0.02 106;
    --ring: 55% 0.15 145;
    --chart-1: 65% 0.15 145;
    --chart-2: 70% 0.12 180;
    --chart-3: 60% 0.18 120;
    --chart-4: 75% 0.10 200;
    --chart-5: 55% 0.20 160;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    font-feature-settings: "rlig" 1, "calt" 1;
  }
}

/* App scaling support */
.app-scale-root {
  overflow: auto;
}

/* Mobile-friendly session page layout */
.session-page-container {
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height for mobile */
  display: flex;
  flex-direction: column;
  background: oklch(var(--background));
  overflow: hidden;
}

.session-content-area {
  flex: 1;
  display: flex;
  overflow: hidden;
  min-height: 0; /* Important for flex children to respect overflow */
}

/* Chat view layout - fixed height, scrollable messages only */
.chat-view-container {
  height: 100%;
  display: flex;
  flex-direction: column;
  background: oklch(var(--background));
  overflow: hidden;
}

.chat-messages-scroll {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  min-height: 0; /* Important for flex children */
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}

/* Chat message bubbles */
.chat-bubble-left {
  max-width: 75%;
  background: oklch(var(--muted));
  padding: 0.75rem 1rem;
  border-radius: 1rem;
  border-top-left-radius: 0.25rem;
}

.chat-bubble-right {
  max-width: 75%;
  background: oklch(var(--primary));
  color: oklch(var(--primary-foreground));
  padding: 0.75rem 1rem;
  border-radius: 1rem;
  border-top-right-radius: 0.25rem;
  margin-left: auto;
}

.chat-bubble-reply-indicator {
  border-left: 3px solid oklch(var(--accent));
  padding-left: 0.5rem;
  margin-bottom: 0.5rem;
  font-size: 0.875rem;
  opacity: 0.8;
}

/* Ensure proper touch scrolling on mobile */
@supports (-webkit-touch-callout: none) {
  .chat-messages-scroll {
    -webkit-overflow-scrolling: touch;
  }
}
