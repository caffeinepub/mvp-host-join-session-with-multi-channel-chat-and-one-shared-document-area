{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Build a documents/notes editor with a toggleable Preview mode that renders note text and inline file/image placeholders.",
  "architectural_notes": [
    "Preview mode should parse noteContent for [FILE:id:filename] tags and render a mixed sequence of <Text> and inline <Image>/<file placeholder> components in a ScrollView, using an existing fileId->URI map."
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-add-a-preview-edit-toggle-control-to-the-session-document-editor-screen-documenteditorview-that-switches-between-the-existing-editable-textarea-and-a-read-only-preview-view-user-facing-labels-must-be-in-english-preview-and-edit",
      "title": "Add a Preview/Edit toggle control to the session document editor screen (DocumentEditorView) that switches between the existing editable textarea and a read-only preview view. User-facing labels must be in English (\"Preview\" and \"Edit\").",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-minimal-preview-renderer-for-document-content-that-parses-embedded-file-markers-in-the-form-file-id-filename-and-renders-the-document-as-a-scrollable-formatted-read-only-view-with-inline-file-items-at-the-marker-positions",
      "title": "Implement a minimal preview renderer for document content that parses embedded file markers in the form \"[FILE:<id>:<filename>]\" and renders the document as a scrollable, formatted read-only view with inline file items at the marker positions.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-in-preview-mode-resolve-each-file-marker-to-the-corresponding-uploaded-file-using-the-existing-documentfiles-list-via-uselistdocumentfiles-and-the-existing-filemap-lookup-file-id-file-reference-render-images-inline-using-the-file-s-direct-url-render-non-image-files-inline-as-a-small-attachment-row-that-shows-the-filename-and-provides-an-open-file-action",
      "title": "In preview mode, resolve each file marker to the corresponding uploaded file using the existing documentFiles list (via useListDocumentFiles) and the existing fileMap lookup (file ID -> file reference). Render images inline using the fileâ€™s direct URL; render non-image files inline as a small attachment row that shows the filename and provides an \"Open file\" action.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-keep-the-change-tightly-scoped-to-the-session-documenteditorview-only-do-not-modify-upload-logic-save-logic-player-documents-ui-chat-stickers-or-other-unrelated-screens",
      "title": "Keep the change tightly scoped to the session DocumentEditorView only; do not modify upload logic, save logic, player documents UI, chat, stickers, or other unrelated screens.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add Preview/Edit toggle in document editor to render read-only preview with inline images/files parsed from [FILE:id:filename] tags (scrollable, minimal/no new libs).",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "projectName": "Session Docs",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}